{"version":3,"sources":["public/js/app.js","public/js/directives.js","public/js/filters.js","public/js/init.js","public/js/services/game.js","public/js/services/global.js","public/js/services/socket.js","public/js/controllers/game.js","public/js/controllers/header.js","public/js/controllers/index.js"],"names":["angular","module","config","$routeProvider","when","templateUrl","otherwise","redirectTo","$locationProvider","hashPrefix","run","$rootScope","safeApply","fn","phase","this","$root","$$phase","$apply","DonationService","window","userDonationCb","donationObject","userDonated","directive","restrict","link","scope","elem","attr","colors","$watch","game","state","curQ","curQuestion","curQuestionArr","text","split","startStyle","players","winningCardPlayer","color","endStyle","shouldRemoveQuestionPunctuation","removePunctuation","cardIndex","cardText","table","winningCard","card","indexOf","length","slice","numAnswers","splice","join","showOptions","$$childHead","global","authenticated","filter","input","charAt","toUpperCase","location","hash","factory","socket","$timeout","id","gameID","playerIndex","gameWinner","czar","playerMinLimit","playerMaxLimit","pointLimit","round","time","notification","timeLimits","joinOverride","notificationQueue","timeout","joinOverrideTimeout","addToNotificationQueue","msg","push","setNotification","clearInterval","shift","timeSetViaUpdate","decrementTime","on","data","clearTimeout","i","socketID","newState","stateChoosing","stateJudging","stateResults","winnerAutopicked","added","_","difference","pluck","removed","j","player","k","replace","hand","joinGame","mode","room","createPrivate","userID","user","_id","emit","startGame","leaveGame","pickCards","cards","pickWinning","_this","_data","$http","$q","getAvatars","all","get","then","results","post","console","log","getMakeAWishFacts","temp","randNum","facts","shuffleIndex","Math","floor","random","io","connect","eventName","callback","args","arguments","apply","removeAllListeners","controller","$scope","$location","MakeAWishFactsService","$dialog","hasPickedCards","winningCardPicked","showTable","modalShown","pickedCards","makeAWishFacts","makeAWishFact","pop","pickCard","sendPickedCards","pointerCursorStyle","isCzar","cursor","cardIsFirstSelected","cardIsSecondSelected","firstAnswer","$index","secondAnswer","showFirst","showSecond","isPlayer","isCustomGame","test","isPremium","premium","currentCzar","winningColor","winningSet","winnerPicked","abandonGame","path","search","setTimeout","document","URL","txt","$","css","text-align","font-size","background","custom","Global","menu","title","AvatarService","playAsGuest","showError","error","avatars"],"mappings":"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","file":"main.js","sourcesContent":["angular.module('mean', ['ngCookies', 'ngResource', 'ui.bootstrap', 'ui.route', 'mean.system', 'mean.directives'])\n  .config(['$routeProvider',\n      function($routeProvider) {\n          $routeProvider.\n          when('/', {\n            templateUrl: 'views/index.html'\n          }).\n          when('/app', {\n            templateUrl: '/views/app.html',\n          }).\n          when('/privacy', {\n            templateUrl: '/views/privacy.html',\n          }).\n          when('/bottom', {\n            templateUrl: '/views/bottom.html'\n          }).\n          when('/signin', {\n            templateUrl: '/views/signin.html'\n          }).\n          when('/signup', {\n            templateUrl: '/views/signup.html'\n          }).\n          when('/choose-avatar', {\n            templateUrl: '/views/choose-avatar.html'\n          }).\n          otherwise({\n            redirectTo: '/'\n          });\n      }\n  ]).config(['$locationProvider',\n    function($locationProvider) {\n        $locationProvider.hashPrefix(\"!\");\n    }\n  ]).run(['$rootScope', function($rootScope) {\n  $rootScope.safeApply = function(fn) {\n    var phase = this.$root.$$phase;\n    if(phase == '$apply' || phase == '$digest') {\n        if(fn && (typeof(fn) === 'function')) {\n            fn();\n        }\n    } else {\n        this.$apply(fn);\n      }\n    };\n  }]).run(['DonationService', function (DonationService) {\n    window.userDonationCb = function (donationObject) {\n      DonationService.userDonated(donationObject);\n    };\n  }]);\n\nangular.module('mean.system', []);\nangular.module('mean.directives', []);","angular.module('mean.directives', [])\n  .directive('player', function (){\n    return{\n      restrict: 'EA',\n      templateUrl: '/views/player.html',\n      link: function(scope, elem, attr){\n        scope.colors = ['#7CE4E8', '#FFFFa5', '#FC575E', '#F2ADFF', '#398EC4', '#8CFF95'];\n      }\n    };\n  }).directive('answers', function() {\n    return {\n      restrict: 'EA',\n      templateUrl: '/views/answers.html',\n      link: function(scope, elem, attr) {\n\n        scope.$watch('game.state', function() {\n          if (scope.game.state === 'winner has been chosen') {\n            var curQ = scope.game.curQuestion;\n            var curQuestionArr = curQ.text.split('_');\n            var startStyle = \"<span style='color: \"+scope.colors[scope.game.players[scope.game.winningCardPlayer].color]+\"'>\";\n            var endStyle = \"</span>\";\n            var shouldRemoveQuestionPunctuation = false;\n            var removePunctuation = function(cardIndex) {\n              var cardText = scope.game.table[scope.game.winningCard].card[cardIndex].text;\n              if (cardText.indexOf('.',cardText.length-2) === cardText.length-1) {\n                cardText = cardText.slice(0,cardText.length-1);\n              } else if ((cardText.indexOf('!',cardText.length-2) === cardText.length-1 ||\n                cardText.indexOf('?',cardText.length-2) === cardText.length-1) &&\n                cardIndex === curQ.numAnswers-1) {\n                shouldRemoveQuestionPunctuation = true;\n              }\n              return cardText;\n            };\n            if (curQuestionArr.length > 1) {\n              var cardText = removePunctuation(0);\n              curQuestionArr.splice(1,0,startStyle+cardText+endStyle);\n              if (curQ.numAnswers === 2) {\n                cardText = removePunctuation(1);\n                curQuestionArr.splice(3,0,startStyle+cardText+endStyle);\n              }\n              curQ.text = curQuestionArr.join(\"\");\n              // Clean up the last punctuation mark in the question if there already is one in the answer\n              if (shouldRemoveQuestionPunctuation) {\n                if (curQ.text.indexOf('.',curQ.text.length-2) === curQ.text.length-1) {\n                  curQ.text = curQ.text.slice(0,curQ.text.length-2);\n                }\n              }\n            } else {\n              curQ.text += ' '+startStyle+scope.game.table[scope.game.winningCard].card[0].text+endStyle;\n            }\n          }\n        });\n      }\n    };\n  }).directive('question', function() {\n    return {\n      restrict: 'EA',\n      templateUrl: '/views/question.html',\n      link: function(scope, elem, attr) {}\n    };\n  })\n  .directive('timer', function(){\n    return{\n      restrict: 'EA',\n      templateUrl: '/views/timer.html',\n      link: function(scope, elem, attr){}\n    };\n  }).directive('landing', function() {\n    return {\n      restrict: 'EA',\n      link: function(scope, elem, attr) {\n        scope.showOptions = true;\n\n        if (scope.$$childHead.global.authenticated === true) {\n          scope.showOptions = false;\n        }\n      }\n    };\n  });","angular.module('mean.system')\n  .filter('upperFirstLetter', function() {\n    return function(input) {\n      input = input || '';\n      return input.charAt(0).toUpperCase() + input.slice(1);\n    };\n  });\n","// window.bootstrap = function() {\n//     angular.bootstrap(document, ['mean']);\n// };\n\n// window.init = function() {\n//     window.bootstrap();\n// };\nif (window.location.hash == \"#_=_\") window.location.hash = \"#!\";\n// $(document).ready(function() {\n//     //Fixing facebook bug with redirect\n    \n\n//     //Then init the app\n//     window.init();\n// });","angular.module('mean.system')\n  .factory('game', ['socket', '$timeout', function (socket, $timeout) {\n\n  var game = {\n    id: null, // This player's socket ID, so we know who this player is\n    gameID: null,\n    players: [],\n    playerIndex: 0,\n    winningCard: -1,\n    winningCardPlayer: -1,\n    gameWinner: -1,\n    table: [],\n    czar: null,\n    playerMinLimit: 3,\n    playerMaxLimit: 11,\n    pointLimit: null,\n    state: null,\n    round: 0,\n    time: 0,\n    curQuestion: null,\n    notification: null,\n    timeLimits: {},\n    joinOverride: false\n  };\n\n  var notificationQueue = [];\n  var timeout = false;\n  var self = this;\n  var joinOverrideTimeout = 0;\n\n  var addToNotificationQueue = function(msg) {\n    notificationQueue.push(msg);\n    if (!timeout) { // Start a cycle if there isn't one\n      setNotification();\n    }\n  };\n  var setNotification = function() {\n    if (notificationQueue.length === 0) { // If notificationQueue is empty, stop\n      clearInterval(timeout);\n      timeout = false;\n      game.notification = '';\n    } else {\n      game.notification = notificationQueue.shift(); // Show a notification and check again in a bit\n      timeout = $timeout(setNotification, 1300);\n    }\n  };\n\n  var timeSetViaUpdate = false;\n  var decrementTime = function() {\n    if (game.time > 0 && !timeSetViaUpdate) {\n      game.time--;\n    } else {\n      timeSetViaUpdate = false;\n    }\n    $timeout(decrementTime, 950);\n  };\n\n  socket.on('id', function(data) {\n    game.id = data.id;\n  });\n\n  socket.on('prepareGame', function(data) {\n    game.playerMinLimit = data.playerMinLimit;\n    game.playerMaxLimit = data.playerMaxLimit;\n    game.pointLimit = data.pointLimit;\n    game.timeLimits = data.timeLimits;\n  });\n\n  socket.on('gameUpdate', function(data) {\n\n    // Update gameID field only if it changed.\n    // That way, we don't trigger the $scope.$watch too often\n    if (game.gameID !== data.gameID) {\n      game.gameID = data.gameID;\n    }\n\n    game.joinOverride = false;\n    clearTimeout(game.joinOverrideTimeout);\n\n    var i;\n    // Cache the index of the player in the players array\n    for (i = 0; i < data.players.length; i++) {\n      if (game.id === data.players[i].socketID) {\n        game.playerIndex = i;\n      }\n    }\n\n    var newState = (data.state !== game.state);\n\n    //Handle updating game.time\n    if (data.round !== game.round && data.state !== 'awaiting players' &&\n      data.state !=='game ended' && data.state !== 'game dissolved') {\n      game.time = game.timeLimits.stateChoosing - 1;\n      timeSetViaUpdate = true;\n    } else if (newState && data.state === 'waiting for czar to decide') {\n      game.time = game.timeLimits.stateJudging - 1;\n      timeSetViaUpdate = true;\n    } else if (newState && data.state === 'winner has been chosen') {\n      game.time = game.timeLimits.stateResults - 1;\n      timeSetViaUpdate = true;\n    }\n\n    // Set these properties on each update\n    game.round = data.round;\n    game.winningCard = data.winningCard;\n    game.winningCardPlayer = data.winningCardPlayer;\n    game.winnerAutopicked = data.winnerAutopicked;\n    game.gameWinner = data.gameWinner;\n    game.pointLimit = data.pointLimit;\n\n    // Handle updating game.table\n    if (data.table.length === 0) {\n      game.table = [];\n    } else {\n      var added = _.difference(_.pluck(data.table,'player'), _.pluck(game.table,'player'));\n      var removed = _.difference(_.pluck(game.table,'player'), _.pluck(data.table,'player'));\n      for (i = 0; i < added.length; i++) {\n        for (var j = 0; j < data.table.length; j++) {\n          if (added[i] === data.table[j].player) {\n            game.table.push(data.table[j],1);\n          }\n        }\n      }\n      for (i = 0; i < removed.length; i++) {\n        for (var k = 0; k < game.table.length; k++) {\n          if (removed[i] === game.table[k].player) {\n            game.table.splice(k,1);\n          }\n        }\n      }\n    }\n\n    if (game.state !== 'waiting for players to pick' || game.players.length !== data.players.length) {\n      game.players = data.players;\n    }\n\n    if (newState || game.curQuestion !== data.curQuestion) {\n      game.state = data.state;\n    }\n\n    if (data.state === 'waiting for players to pick') {\n      game.czar = data.czar;\n      game.curQuestion = data.curQuestion;\n      // Extending the underscore within the question\n      game.curQuestion.text = data.curQuestion.text.replace(/_/g,'<u></u>');\n\n      // Set notifications only when entering state\n      if (newState) {\n        if (game.czar === game.playerIndex) {\n          addToNotificationQueue('You\\'re the Card Czar! Please wait!');\n        } else if (game.curQuestion.numAnswers === 1) {\n          addToNotificationQueue('Select an answer!');\n        } else {\n          addToNotificationQueue('Select TWO answers!');\n        }\n      }\n    } else if (data.state === 'waiting for czar to decide') {\n      if (game.czar === game.playerIndex) {\n        addToNotificationQueue(\"Everyone's done. Choose the winner!\");\n      } else {\n        addToNotificationQueue(\"The czar is contemplating...\");\n      }\n    } else if (data.state === 'winner has been chosen' &&\n              game.curQuestion.text.indexOf('<u></u>') > -1) {\n      game.curQuestion = data.curQuestion;\n    } else if (data.state === 'awaiting players') {\n      joinOverrideTimeout = $timeout(function() {\n        game.joinOverride = true;\n      }, 15000);\n    } else if (data.state === 'game dissolved' || data.state === 'game ended') {\n      game.players[game.playerIndex].hand = [];\n      game.time = 0;\n    }\n  });\n\n  socket.on('notification', function(data) {\n    addToNotificationQueue(data.notification);\n  });\n\n  game.joinGame = function(mode,room,createPrivate) {\n    mode = mode || 'joinGame';\n    room = room || '';\n    createPrivate = createPrivate || false;\n    var userID = !!window.user ? user._id : 'unauthenticated';\n    socket.emit(mode,{userID: userID, room: room, createPrivate: createPrivate});\n  };\n\n  game.startGame = function() {\n    socket.emit('startGame');\n  };\n\n  game.leaveGame = function() {\n    game.players = [];\n    game.time = 0;\n    socket.emit('leaveGame');\n  };\n\n  game.pickCards = function(cards) {\n    socket.emit('pickCards',{cards: cards});\n  };\n\n  game.pickWinning = function(card) {\n    socket.emit('pickWinning',{card: card.id});\n  };\n\n  decrementTime();\n\n  return game;\n}]);\n","angular.module('mean.system')\n  .factory('Global', [function() {\n    var _this = this;\n    _this._data = {\n        user: window.user,\n        authenticated: !! window.user\n    };\n\n    return _this._data;\n  }])\n  .factory('AvatarService', ['$http', '$q', function($http, $q) {\n    return {\n      getAvatars: function() {\n        return $q.all([\n          $http.get('/avatars')\n        ])\n        .then(function(results) {\n          return results[0].data;\n        });\n      }\n    };\n  }])\n  .factory('DonationService', ['$http', '$q', function($http, $q) {\n    return {\n      userDonated: function(donationObject) {\n        return $q.all([\n          $http.post('/donations', donationObject)\n        ])\n        .then(function(results) {\n          console.log('userDonated success', results);\n        });\n      }\n    };\n  }])\n  .factory('MakeAWishFactsService', [function() {\n    return {\n      getMakeAWishFacts: function() {\n        var facts = ['Health professionals who treat wish kids, including nurses and doctors, overwhelmingly believe that the wish experience can improve a wish kids’ physical health.',\n  'Most health professionals say a wish come true has the potential to be a positive turning point in the child’s battle for health.',\n  'Parents and volunteers observe that a wish come true makes kids feel stronger and more energetic.',\n  'Wish kids are more willing to comply with difficult, but vital, treatment regimens.',\n  'Parents and medical professionals alike describe the wish experience as a frequent turning point in wish kids’ battles for health.',\n  'A combined 89 percent of doctors, nurses and health professionals surveyed say they believe a wish experience can influence wish kids’ physical health.',\n  'Children and their parents alike experience more happiness and less fear in their lives.',\n  'Children are less isolated from friends, and feel a return of self-confidence that comes with feeling “normal” again.',\n  'Children are empowered to take back control of their lives, and to keep up the fight against their life-threatening medical conditions.',\n  'Parents say their family units – often strained to the limit by stresses of the illnesses – are repaired and strengthened through the shared experience of the wish process.',\n  'Ninety-nine percent of parents reported that the wish experience gave their children increased feelings of happiness and 96 percent said that the wish experience strengthened their families.',\n  'A wish is much more than just a nice thing. And its reach extends far beyond a single event, or moment in time. Wish kids, parents, medical professionals, volunteers, and others say that wish experiences can change the lives of everyone involved, forever.',\n  'Make-A-Wish® grants a wish, on average, every 38 minutes and, on average, a child is referred for a wish every 28 minutes.',\n  'Every wish experience is driven by the wish kid’s interests, creativity and personality.',\n  'Make-A-Wish granted nearly 14,000 wishes in 2012 alone.',\n  'To qualify for a wish, a child with a life-threatening medical condition must be older than 2½ years and younger than 18 (at the time of referral) and must not have received a wish from another wish-granting organization.',\n  'A child can be referred by a parent or guardian, a medical professional, or by the child.',\n  'Following referral, a certified medical professional must verify that the child has a life-threatening medical condition. There are no other qualifications based on sex, race, religion, socioeconomic status or any other demographic category.',\n  'Make-A-Wish chapters serve every community in the United States and its territories.',\n  'Make-A-Wish has approximately 25,000 active volunteers in the United States.',\n  'Make-A-Wish needs 2.5 billion frequent flier miles to meet all the travel needs for wish kids and their families.',\n  'Nearly 75 percent of wish experiences involve travel.',\n  'The Walt Disney Company is involved in 40 percent of the wishes Make-A-Wish grants.',\n  'As of August 2012, the average cost of a wish was $8,141.'];\n        var shuffleIndex = facts.length;\n        var temp;\n        var randNum;\n\n        while (shuffleIndex) {\n          randNum = Math.floor(Math.random() * shuffleIndex--);\n          temp = facts[randNum];\n          facts[randNum] = facts[shuffleIndex];\n          facts[shuffleIndex] = temp;\n        }\n\n        return facts;\n      }\n    };\n  }]);","angular.module('mean.system')\n.factory('socket', ['$rootScope', function($rootScope){\n  var socket = io.connect();\n  return {\n    on: function(eventName, callback){\n      socket.on(eventName, function(){\n        var args = arguments;\n        $rootScope.safeApply(function(){\n          callback.apply(socket, args);\n        });\n      });\n    },\n    emit: function(eventName, data, callback){\n      socket.emit(eventName, data, function(){\n        var args = arguments;\n      });\n      $rootScope.safeApply(function(){\n        if(callback){\n          callback.apply(socket, args);\n        }\n      });\n    },\n    removeAllListeners: function(eventName, callback){\n      socket.removeAllListeners(eventName, function () {\n        var args = arguments;\n        $rootScope.safeApply(function() {\n          if(callback) {\n            callback.apply(socket, args);\n          }\n        });\n      });\n    }\n  };\n}]);","angular.module('mean.system')\n.controller('GameController', ['$scope', 'game', '$timeout', '$location', 'MakeAWishFactsService', '$dialog', function ($scope, game, $timeout, $location, MakeAWishFactsService, $dialog) {\n    $scope.hasPickedCards = false;\n    $scope.winningCardPicked = false;\n    $scope.showTable = false;\n    $scope.modalShown = false;\n    $scope.game = game;\n    $scope.pickedCards = [];\n    var makeAWishFacts = MakeAWishFactsService.getMakeAWishFacts();\n    $scope.makeAWishFact = makeAWishFacts.pop();\n\n    $scope.pickCard = function(card) {\n      if (!$scope.hasPickedCards) {\n        if ($scope.pickedCards.indexOf(card.id) < 0) {\n          $scope.pickedCards.push(card.id);\n          if (game.curQuestion.numAnswers === 1) {\n            $scope.sendPickedCards();\n            $scope.hasPickedCards = true;\n          } else if (game.curQuestion.numAnswers === 2 &&\n            $scope.pickedCards.length === 2) {\n            //delay and send\n            $scope.hasPickedCards = true;\n            $timeout($scope.sendPickedCards, 300);\n          }\n        } else {\n          $scope.pickedCards.pop();\n        }\n      }\n    };\n\n    $scope.pointerCursorStyle = function() {\n      if ($scope.isCzar() && $scope.game.state === 'waiting for czar to decide') {\n        return {'cursor': 'pointer'};\n      } else {\n        return {};\n      }\n    };\n\n    $scope.sendPickedCards = function() {\n      game.pickCards($scope.pickedCards);\n      $scope.showTable = true;\n    };\n\n    $scope.cardIsFirstSelected = function(card) {\n      if (game.curQuestion.numAnswers > 1) {\n        return card === $scope.pickedCards[0];\n      } else {\n        return false;\n      }\n    };\n\n    $scope.cardIsSecondSelected = function(card) {\n      if (game.curQuestion.numAnswers > 1) {\n        return card === $scope.pickedCards[1];\n      } else {\n        return false;\n      }\n    };\n\n    $scope.firstAnswer = function($index){\n      if($index % 2 === 0 && game.curQuestion.numAnswers > 1){\n        return true;\n      } else{\n        return false;\n      }\n    };\n\n    $scope.secondAnswer = function($index){\n      if($index % 2 === 1 && game.curQuestion.numAnswers > 1){\n        return true;\n      } else{\n        return false;\n      }\n    };\n\n    $scope.showFirst = function(card) {\n      return game.curQuestion.numAnswers > 1 && $scope.pickedCards[0] === card.id;\n    };\n\n    $scope.showSecond = function(card) {\n      return game.curQuestion.numAnswers > 1 && $scope.pickedCards[1] === card.id;\n    };\n\n    $scope.isCzar = function() {\n      return game.czar === game.playerIndex;\n    };\n\n    $scope.isPlayer = function($index) {\n      return $index === game.playerIndex;\n    };\n\n    $scope.isCustomGame = function() {\n      return !(/^\\d+$/).test(game.gameID) && game.state === 'awaiting players';\n    };\n\n    $scope.isPremium = function($index) {\n      return game.players[$index].premium;\n    };\n\n    $scope.currentCzar = function($index) {\n      return $index === game.czar;\n    };\n\n    $scope.winningColor = function($index) {\n      if (game.winningCardPlayer !== -1 && $index === game.winningCard) {\n        return $scope.colors[game.players[game.winningCardPlayer].color];\n      } else {\n        return '#f9f9f9';\n      }\n    };\n\n    $scope.pickWinning = function(winningSet) {\n      if ($scope.isCzar()) {\n        game.pickWinning(winningSet.card[0]);\n        $scope.winningCardPicked = true;\n      }\n    };\n\n    $scope.winnerPicked = function() {\n      return game.winningCard !== -1;\n    };\n\n    $scope.startGame = function() {\n      game.startGame();\n    };\n\n    $scope.abandonGame = function() {\n      game.leaveGame();\n      $location.path('/');\n    };\n\n    // Catches changes to round to update when no players pick card\n    // (because game.state remains the same)\n    $scope.$watch('game.round', function() {\n      $scope.hasPickedCards = false;\n      $scope.showTable = false;\n      $scope.winningCardPicked = false;\n      $scope.makeAWishFact = makeAWishFacts.pop();\n      if (!makeAWishFacts.length) {\n        makeAWishFacts = MakeAWishFactsService.getMakeAWishFacts();\n      }\n      $scope.pickedCards = [];\n    });\n\n    // In case player doesn't pick a card in time, show the table\n    $scope.$watch('game.state', function() {\n      if (game.state === 'waiting for czar to decide' && $scope.showTable === false) {\n        $scope.showTable = true;\n      }\n    });\n\n    $scope.$watch('game.gameID', function() {\n      if (game.gameID && game.state === 'awaiting players') {\n        if (!$scope.isCustomGame() && $location.search().game) {\n          // If the player didn't successfully enter the request room,\n          // reset the URL so they don't think they're in the requested room.\n          $location.search({});\n        } else if ($scope.isCustomGame() && !$location.search().game) {\n          // Once the game ID is set, update the URL if this is a game with friends,\n          // where the link is meant to be shared.\n          $location.search({game: game.gameID});\n          if(!$scope.modalShown){\n            setTimeout(function(){\n              var link = document.URL;\n              var txt = 'Give the following link to your friends so they can join your game: ';\n              $('#lobby-how-to-play').text(txt);\n              $('#oh-el').css({'text-align': 'center', 'font-size':'22px', 'background': 'white', 'color': 'black'}).text(link);\n            }, 200);\n            $scope.modalShown = true;\n          }\n        }\n      }\n    });\n\n    if ($location.search().game && !(/^\\d+$/).test($location.search().game)) {\n      console.log('joining custom game');\n      game.joinGame('joinGame',$location.search().game);\n    } else if ($location.search().custom) {\n      game.joinGame('joinGame',null,true);\n    } else {\n      game.joinGame();\n    }\n\n}]);\n","angular.module('mean.system')\n.controller('HeaderController', ['$scope', 'Global', function ($scope, Global) {\n    $scope.global = Global;\n\n    $scope.menu = [{\n        \"title\": \"Articles\",\n        \"link\": \"articles\"\n    }, {\n        \"title\": \"Create New Article\",\n        \"link\": \"articles/create\"\n    }];\n}]);","angular.module('mean.system')\n.controller('IndexController', ['$scope', 'Global', '$location', 'socket', 'game', 'AvatarService', function ($scope, Global, $location, socket, game, AvatarService) {\n    $scope.global = Global;\n\n    $scope.playAsGuest = function() {\n      game.joinGame();\n      $location.path('/app');\n    };\n\n    $scope.showError = function() {\n      if ($location.search().error) {\n        return $location.search().error;\n      } else {\n        return false;\n      }\n    };\n\n    $scope.avatars = [];\n    AvatarService.getAvatars()\n      .then(function(data) {\n        $scope.avatars = data;\n      });\n\n}]);"],"sourceRoot":"/source/"}